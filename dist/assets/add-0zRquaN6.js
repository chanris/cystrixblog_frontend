import{d as F}from"./article-QCYIFHnI.js";import{_ as j,a as q}from"./tag-oFrp3rdu.js";import{a as $}from"./category-ikiEN8KW.js";import{u as G,r as n,o as L,b as d,q as H,c as i,d as V,f as a,e as o,s as T,k as b,h as u,E as c,g as _,F as A,i as J,p as K,j as O}from"./index-svAZxImQ.js";import{_ as P}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./request-Kvlrod8x.js";const g=p=>(K("data-v-92323c62"),p=p(),O(),p),Q={class:"box"},W={class:"form"},X={style:{display:"flex","align-items":"center"}},Y=g(()=>a("span",{style:{width:"70px"}},"文章名称：",-1)),Z={style:{display:"flex","align-items":"center"}},ee=g(()=>a("span",{style:{width:"37px"}},"摘要：",-1)),te={style:{display:"flex","align-items":"center"}},le=g(()=>a("span",{style:{width:"45px"}},"标签：",-1)),ae=g(()=>a("span",null,"分类：",-1)),se={__name:"add",setup(p){const z=G(),l=n({content:"",title:"",digest:"",tagIdList:[],categoryId:""}),C=s=>{F(s).then(()=>{c({type:"success",message:"添加成功"}),z.push({name:"adminArticle"})})},U=()=>{if(l.value.content===""){c({type:"error",message:"文章内容不能为空"});return}else if(l.value.title===""){c({type:"error",message:"文章标题不能为空"});return}else if(l.value.digest===""){c({type:"error",message:"文章摘要不能为空"});return}else C(l.value)};L(()=>{M()});const m=n([]),f=n(!1),r=n(""),y=n(!1),M=()=>{y.value=!0,j().then(({result:s})=>{m.value=s,m.value.forEach(e=>{e.value=e.id,e.label=e.name})}).finally(()=>{y.value=!1})},B=()=>{if(r.value){let s=r.value;q({name:r.value}).then(e=>{m.value.push({id:e.result,name:s}),c({type:"success",message:"添加成功"})}),k()}else c({type:"error",message:"标签名称不能为空"})},k=()=>{r.value="",f.value=!1},h=n(!1),w=n([]);L(()=>{E({id:1})});const E=s=>{h.value=!0,$(s).then(({result:e})=>{w.value.push(e)}).finally(()=>{h.value=!1})};return(s,e)=>{const x=d("el-input"),N=d("el-option"),v=d("el-button"),R=d("el-select"),S=d("el-tree-select"),D=d("v-md-editor"),I=H("loading");return i(),V("div",Q,[a("div",W,[a("div",X,[Y,o(x,{style:{width:"200px"},maxlength:"30",modelValue:l.value.title,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.title=t),modelModifiers:{trim:!0},placeholder:"请输入文章名称",clearable:""},null,8,["modelValue"])]),a("div",Z,[ee,o(x,{modelValue:l.value.digest,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.digest=t),modelModifiers:{trim:!0},autosize:{minRows:1,maxRows:4},resize:"none",clearable:"",type:"textarea",placeholder:"文章摘要（限两百字）",maxlength:"200",style:{width:"300px"}},null,8,["modelValue"])]),a("div",te,[le,T((i(),b(R,{modelValue:l.value.tagIdList,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.tagIdList=t),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":2,placeholder:"请选择标签",style:{width:"240px"}},{footer:u(()=>[f.value?(i(),V(A,{key:1},[o(x,{style:{"margin-bottom":"10px"},modelValue:r.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value=t),maxlength:"15",placeholder:"请输入标签名称",size:"small",clearable:""},null,8,["modelValue"]),o(v,{type:"primary",size:"small",onClick:B},{default:u(()=>[_("添加")]),_:1}),o(v,{size:"small",onClick:k},{default:u(()=>[_("取消")]),_:1})],64)):(i(),b(v,{key:0,text:"",bg:"",size:"small",onClick:e[2]||(e[2]=t=>f.value=!0)},{default:u(()=>[_(" 新建标签 ")]),_:1}))]),default:u(()=>[(i(!0),V(A,null,J(m.value,t=>(i(),b(N,{key:t.value,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])),[[I,y.value]])]),a("div",null,[ae,T(o(S,{placeholder:"请选择分类",modelValue:l.value.categoryId,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.categoryId=t),data:w.value,"check-strictly":"","render-after-expand":!1,"show-checkbox":""},null,8,["modelValue","data"]),[[I,h.value]])]),o(v,{type:"primary",onClick:U},{default:u(()=>[_("发布")]),_:1})]),a("div",null,[o(D,{modelValue:l.value.content,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.content=t),modelModifiers:{trim:!0},height:"790px"},null,8,["modelValue"])])])}}},ce=P(se,[["__scopeId","data-v-92323c62"]]);export{ce as default};
