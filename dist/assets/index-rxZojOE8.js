import{a as g,d as v,e as x}from"./category-ikiEN8KW.js";import{_ as y}from"./_plugin-vue_export-helper-x3n3nnut.js";import{o as C,r,b as k,q as B,c as d,d as T,s as w,k as b,h as E,f as c,t as D,D as p,E as _}from"./index-svAZxImQ.js";import"./request-Kvlrod8x.js";const M={class:"container"},I={class:"custom-tree-node"},$={style:{"font-weight":"500","margin-left":"200px"}},q=["onClick"],A=["onClick"],N={__name:"index",setup(P){C(()=>{u({id:1})});const s=r([]),i=r(!1),u=e=>{i.value=!0,g(e).then(({result:t})=>{s.value.push(t)}).finally(()=>{i.value=!1})},h=e=>{p.prompt("请输入标签名称","添加标签",{confirmButtonText:"添加",cancelButtonText:"取消",inputPattern:/.+/,inputErrorMessage:"名称不能为空"}).then(({value:t})=>{const n={label:t,children:[]};e.children||(e.children=[]);let o={name:t,pid:e.id};v(o).then(({result:a})=>{n.id=a,e.children.push(n),s.value=[...s.value],_({type:"success",message:"添加成功"})})}).catch(()=>{})},m=(e,t)=>{p.confirm("你确定要删除该分类?","删除分类",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消"}).then(()=>{x({id:t.id}).then(()=>{const n=e.parent,o=n.data.children||n.data,a=o.findIndex(l=>l.id===t.id);o.splice(a,1),s.value=[...s.value],_({type:"success",message:"删除成功"})})}).catch(n=>{})};return(e,t)=>{const n=k("el-tree"),o=B("loading");return d(),T("div",M,[w((d(),b(n,{style:{width:"800px"},data:s.value,"show-checkbox":"","node-key":"categoryTree","default-expand-all":"","expand-on-click-node":!1},{default:E(({node:a,data:l})=>[c("span",I,[c("span",null,D(a.label),1),c("span",$,[c("a",{onClick:f=>h(l),style:{color:"red"}}," 添加 ",8,q),c("a",{style:{"margin-left":"8px",color:"blue"},onClick:f=>m(a,l)}," 删除 ",8,A)])])]),_:1},8,["data"])),[[o,i.value]])])}}},F=y(N,[["__scopeId","data-v-7d58c321"]]);export{F as default};
